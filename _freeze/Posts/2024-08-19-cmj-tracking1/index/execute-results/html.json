{
  "hash": "37d2902b42240b68efe5ffb167a97063",
  "result": {
    "markdown": "---\ntitle: \"Jump Analysis in R - Part 1: Visualizing Individual Performance\"\ndescription: \"In part one of this series, we will create a simple visualization to track the countermovement jump performance of one athlete\"\nauthor:\n  - name: Andrew Kates\n    url: https://github.com/AKates717\ndate: 08-19-2024\ncategories: [\"S&C\",\"R\", \"ggplot2\"]\nimage: CMJ.ppm\ndraft: false\nexecute: \n  echo: true\ncode-fold: show\neditor_options: \n  chunk_output_type: console\n---\n\n\nIf you are a strength and conditioning (S&C) coach or sport scientist, there's a good chance you collect countermovement jump (CMJ) data with your athletes, and an equally good chance you use Microsoft Excel to work with your data. In fact, S&C coaches have been plotting CMJ results in Microsoft Excel since the mid 1500s.\n\nMore recently, however, the sport science community has embraced more advanced tools for data analysis, with R being a popular choice.\n\n## Who is this post for?\n\nMaybe you collect data from force plates but you don't have a system for analyzing that data. Maybe you don't have force plates, but you're able to collect jumps from a jump mat, or an application like MyJump. Or maybe you have access to a consumer grade system, like Vald Force Decks or Hawkin Dynamics, but you want to build custom reports outside of those systems. If any of these describe you, I hope you will be able to learn from this post.\n\n## Getting Set Up\n\nThis post does assume that you have R and R Studio installed on your computer, and that you are at least a little bit familiar with coding in R Studio.\n\nWe will start by installing and loading all necessary packages. I will also source some pre-built functions, which are outside the scope of this post, but which you can find in the github repository for this site.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(janitor)\n#library(bslib)\n#library(ggthemes)\n#library(lubridate)\n#library(thematic)\n#library(plotly)\n#library(patchwork)\n#library(scales)\n#library(gt)\n#library(gtExtras)\n#library(withr)\n#library(ggpp)\n#library(ggimage)\n\n#shouldn't need this\nsource(\"~/Dropbox/Data Science/Website/plot_functions.R\")\n```\n:::\n\n\n## Data Import and Preparation\n\nFor the purposes of this post, I've created a table containing five days worth of CMJ results for a fictional athlete. The table is very simple and contains only three columns; date, jump number, and jump height.\n\nfor this post, need to make sure that whatever table I show the reader, that I'm creating the ggplot from that table (not from my own version with athlete names). Might be best to include a csv in the repo and just import from there.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrecent_five <- read_csv(\"recent_five.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrecent_five\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 15 Ã— 3\n   Date       Jump   flight_height_tov\n   <date>     <chr>              <dbl>\n 1 2024-08-14 Jump 1              28.1\n 2 2024-08-14 Jump 2              30.1\n 3 2024-08-14 Jump 3              29.3\n 4 2024-08-09 Jump 1              30.4\n 5 2024-08-09 Jump 2              29.0\n 6 2024-08-09 Jump 3              28.5\n 7 2024-07-22 Jump 1              28.9\n 8 2024-07-22 Jump 2              29.2\n 9 2024-07-22 Jump 3              28.8\n10 2024-07-18 Jump 1              29.1\n11 2024-07-18 Jump 2              27.4\n12 2024-07-18 Jump 3              27.3\n13 2024-06-14 Jump 1              27.7\n14 2024-06-14 Jump 2              28.2\n15 2024-06-14 Jump 3              27.7\n```\n:::\n:::\n\n\nAs you can see, our fictional athlete has performed 3 jumps on each of 5 different days between June 14, 2024 and August 14, 2024. Now that we have a very simple data set to work with, let's define what we would like our plot to display.\n\n## What am I trying to accomplish with this plot?\n\nTraditionally, as an S&C coach, we are likely interested in either the daily average or daily maximum, but because I'm greedy I am going to try to include as much information in this plot as possible.\n\nI want my plot to clearly show:\n\n1.  Average Daily Jump Height\n\n2.  Best Daily Jump\n\n3.  Each jump performed\n\n4.  Average performance across all 5 dates\n\nNow, that's a lot of information for one plot, so let's go one step at a time, and see if we can communicate all of this information in a visually pleasing, non-overwhelming manner.\n\n## Creating the Plot\n\n#### 1. Average Daily Jump Height\n\nWe will start by taking our `recent_five` data-frame, and creating a `ggplot` with the date on the x-axis. We will also use a function called `stat_summary` to create a mean score for each date.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrecent_five %>%\n  ggplot(aes(x = factor(Date, ordered = T))) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"mean\", geom = \"point\")\n```\n\n::: {.cell-output-display}\n![Countermovement jump heights from the last five testing dates](index_files/figure-html/fig-cmj1-1.png){#fig-cmj1 width=672}\n:::\n:::\n\n\nSo now we've created the basic plot, and we've also added our first \"layer\"; mean jump height for each date.\n\nBefore we continue adding layers to the plot, however, I'm going to clean it up a bit with some custom themes.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Create a custom theme for my plots and save it as ak_plot_theme\n\n#copy/paste ak_plot_theme\n```\n:::\n\n\nBelow, you can see that I've added my theme as an additional layer to the plot. I've also changed the size of the \"mean\" data points, and I've customized the labels using `labs()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrecent_five %>%\n  ggplot(aes(x = factor(Date, ordered = T))) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"mean\", geom = \"point\", size = 6) +\n  ak_plot_theme() +\n  labs(\n    x = NULL,\n    y = \"Jump Height (cm)\",\n    title = NULL)\n```\n\n::: {.cell-output-display}\n![Countermovement jump heights from the last five testing dates](index_files/figure-html/fig-cmj-themed-1.png){#fig-cmj-themed width=672}\n:::\n:::\n\n\n#### 2. Best Daily Jump Height\n\nNow we've got our basic plot, with a bit of formatting to make it look good, let's add a point to show the best (highest) jump our athlete performed each day.\n\n\n::: {.cell .caption-margin}\n\n```{.r .cell-code}\nrecent_five %>%\n  ggplot(aes(x = factor(Date, ordered = T))) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"mean\", geom = \"point\", size = 6) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"max\", geom = \"point\", size = 4) +\n    ak_plot_theme() +\n  labs(\n    x = NULL,\n    y = \"Jump Height (cm)\",\n    title = NULL)\n```\n\n::: {.cell-output-display}\n![Countermovement jump heights from the last five testing dates](index_files/figure-html/fig-cmj2-1.png){#fig-cmj2 width=672}\n:::\n:::\n\n\nGreat, we've got both average and maximum on the same plot. I'm just going to make some aesthetic improvements by\n\n1.  Creating a custom function to draw a vertical line connecting the mean and max dots, then adding a layer using that function (@fig-cmj3-1 )\n\n2.  Connecting the daily Mean scores with a line so we can see changes between daily scores a bit better (@fig-cmj3-2 ).\n\n\n::: {#fig-cmj3 .cell .column-page layout-ncol=\"2\"}\n\n```{.r .cell-code}\nrecent_five %>%\n  ggplot(aes(x = factor(Date, ordered = T))) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"mean\", geom = \"point\", size = 4) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"max\", geom = \"point\", size = 2) +\n  stat_summary(aes(y = flight_height_tov), fun.data=mean_peak, geom=\"pointrange\", size = 2) +\n  ak_plot_theme() +\n  labs(\n    x = NULL,\n    y = \"Jump Height (cm)\",\n    title = NULL)\n\nrecent_five %>%\n  ggplot(aes(x = factor(Date, ordered = T))) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"mean\", geom = \"point\", size = 4) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"max\", geom = \"point\", size = 2) +\n  stat_summary(aes(y = flight_height_tov), fun.data=mean_peak, geom=\"pointrange\", size = 2) +\n  stat_summary(aes(y = flight_height_tov, group = 5), fun = \"mean\", geom = \"line\", linewidth = 1) +\n  ak_plot_theme() +\n  labs(\n    x = NULL,\n    y = \"Jump Height (cm)\",\n    title = NULL)\n```\n\n::: {.cell-output-display}\n![Vertical lines to join Mean and Max for each day](index_files/figure-html/fig-cmj3-1.png){#fig-cmj3-1 width=672}\n:::\n\n::: {.cell-output-display}\n![Trend line for the Mean daily jump height](index_files/figure-html/fig-cmj3-2.png){#fig-cmj3-2 width=672}\n:::\n\nCountermovement jump heights from the last five testing dates\n:::\n\n\n#### 3. Each Jump Performed\n\nLet's add a small dot so we can see the height of each jump.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrecent_five %>%\n  ggplot(aes(x = factor(Date, ordered = T))) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"mean\", geom = \"point\", size = 4) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"max\", geom = \"point\", size = 2) +\n  stat_summary(aes(y = flight_height_tov), fun.data=mean_peak, geom=\"pointrange\", size = 2) +\n  stat_summary(aes(y = flight_height_tov, group = 5), fun = \"mean\", geom = \"line\", linewidth = 1) +\n  geom_jitter(aes(y = flight_height_tov), shape = 1, size = 2, alpha = 0.5, width = 0.2) +\n  #geom_hline(aes(yintercept = mean(as.numeric(flight_height_tov))), alpha = 0.3, linetype = 2, linewidth = 1.5) +\n  ak_plot_theme() +\n  labs(\n    x = NULL,\n    y = \"Jump Height (cm)\",\n    title = NULL)\n```\n\n::: {.cell-output-display}\n![Countermovement jump heights from the last five testing dates](index_files/figure-html/fig-cmj4-1.png){#fig-cmj4 width=672}\n:::\n:::\n\n\n#### 4. Average performance across all five dates\n\nIn Figure 5a, I've added a line representing the average jump height from our data set, which allows us to compare. 5b Average + SD? Look up some Hawkin values here. 5c A regression line to give a general idea of how the athlete's jump height is trending. I will discuss some options for analyzing these plots in a future blog post.\n\nFuture blog posts\n\n-   Turning our ggplot2 plots into plotly plots\n\n-   adding data analysis to our plots to measure changes in jump performance\n\n::: {layout=\"[ 40, 60 ]\"}\n::: {#first-column}\n\n::: {.cell}\n\n```{.r .cell-code .code-overflow-wrap}\nrecent_five %>%\n  ggplot(aes(x = factor(Date, ordered = T))) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"mean\", geom = \"point\", size = 4) +\n  stat_summary(aes(y = flight_height_tov, group = Date), fun = \"max\", geom = \"point\", size = 2) +\n  stat_summary(aes(y = flight_height_tov), fun.data=mean_peak, geom=\"pointrange\", size = 2) +\n  stat_summary(aes(y = flight_height_tov, group = 5), fun = \"mean\", geom = \"line\", linewidth = 1) +\n  geom_jitter(aes(y = flight_height_tov), shape = 1, size = 2, alpha = 0.5, width = 0.2) +\n  #geom_hline(aes(yintercept = mean(as.numeric(flight_height_tov))), alpha = 0.3, linetype = 2, linewidth = 1.5) +\n  ak_plot_theme() +\n  labs(\n    x = NULL,\n    y = \"Jump Height (cm)\",\n    title = NULL)\n```\n:::\n\n\nSome text that should be laid out below the code\n:::\n\n::: {#second-column}\n\n::: {.cell}\n::: {.cell-output-display}\n![Countermovement jump heights from the last five testing dates](index_files/figure-html/fig-cmj6-1.png){#fig-cmj6 width=672}\n:::\n:::\n\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}